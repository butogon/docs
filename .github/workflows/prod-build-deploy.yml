name: Production - Build and Deploy

# **What it does**: Builds and deploys the default branch to production
# **Why we have it**: To enable us to deploy the latest to production whenever necessary rather than relying on PR merges.
# **Who does it impact**: All contributors.

on:
  push:
    branches:
      - main
  workflow_dispatch:

permissions:
  contents: read
  deployments: write

# This allows a subsequently queued workflow run to take priority over
# previously queued runs but NOT interrupt currently executing runs
concurrency:
  group: '${{ github.workflow }}'
  cancel-in-progress: false

jobs:
  build-and-deploy:
    if: ${{ github.repository == 'github/docs-internal'}}
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - name: Check out repo
        uses: actions/checkout@ec3a7ce113134d7a93b817d10a8272cb61118579
        with:
          persist-credentials: 'false'
          lfs: 'true'

      - name: Check out LFS objects
        run: git lfs checkout

      - name: Setup node
        uses: actions/setup-node@04c56d2f954f1e4c69436aa54cfef261a018f458
        with:
          node-version: 16.13.x
          cache: npm

      # Required for `npm pkg ...` command support
      - name: Update to npm@^7.20.0
        run: npm install --global npm@^7.20.0

      - name: Install dependencies
        run: npm ci

      - name: Clone early access
        run: node script/early-access/clone-for-build.js
        env:
          DOCUBOT_REPO_PAT: ${{ secrets.DOCUBOT_REPO_PAT }}
          GIT_BRANCH: main

      - name: Cache nextjs build
        uses: actions/cache@c64c572235d810460d0d6876e9c705ad5002b353
        with:
          path: .next/cache
          key: ${{ runner.os }}-nextjs-${{ hashFiles('package*.json') }}

      - name: Build
        run: npm run build

      - name: Remove development-only dependencies
        run: npm prune --production

      - name: Remove all npm scripts
        run: npm pkg delete scripts

      - name: Set npm script for Heroku build to noop
        run: npm set-script heroku-postbuild "echo 'Application was pre-built!'"

      - name: Create a gzipped archive
        run: |
          tar -cz --file=app.tar.gz \
            node_modules/ \
            .next/ \
            assets/ \
            content/ \
            data/ \
            includes/ \
            lib/ \
            middleware/ \
            translations/ \
            server.mjs \
            package*.json \
            .npmrc \
            feature-flags.json \
            next.config.js \
            app.json \
            Procfile

      - name: Install the development dependencies again
        run: npm install

      - name: Create a Heroku build source
        id: build-source
        uses: actions/github-script@2b34a689ec86a68d8ab9478298f91d5401337b7d
        env:
          HEROKU_API_TOKEN: ${{ secrets.HEROKU_API_TOKEN }}
        with:
          script: |
            const { owner, repo } = context.repo

            if (owner !== 'github') {
              throw new Error(`Repository owner must be 'github' but was: ${owner}`)
            }
            if (repo !== 'docs-internal') {
              throw new Error(`Repository name must be 'docs-internal' but was: ${repo}`)
            }

            const Heroku = require('heroku-client')
            const heroku = new Heroku({ token: process.env.HEROKU_API_TOKEN })

            try {
              const { source_blob: sourceBlob } = await heroku.post('/sources')
              const { put_url: uploadUrl, get_url: downloadUrl } = sourceBlob

              core.setOutput('upload_url', uploadUrl)
              core.setOutput('download_url', downloadUrl)
            } catch (error) {
              if (error.statusCode === 503) {
                console.error('üíÄ Heroku may be down! Please check its Status page: https://status.heroku.com/')
              }
              throw error
            }

      # See: https://devcenter.heroku.com/articles/build-and-release-using-the-api#sources-endpoint
      - name: Upload to the Heroku build source
        env:
          UPLOAD_URL: ${{ steps.build-source.outputs.upload_url }}
        run: |
          curl "$UPLOAD_URL" \
            -X PUT \
            -H 'Content-Type:' \
            --data-binary @app.tar.gz

      - name: Deploy
        id: deploy
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          HEROKU_API_TOKEN: ${{ secrets.HEROKU_API_TOKEN }}
          HEROKU_PRODUCTION_APP_NAME: ${{ secrets.HEROKU_PRODUCTION_APP_NAME }}
          HYDRO_ENDPOINT: ${{ secrets.HYDRO_ENDPOINT }}
          HYDRO_SECRET: ${{ secrets.HYDRO_SECRET }}
          SOURCE_BLOB_URL: ${{ steps.build-source.outputs.download_url }}
          DELAY_FOR_PREBOOT: 'true'
          ALLOWED_POLLING_FAILURES_PER_PHASE: '15'
          RUN_ID: ${{ github.run_id }}
        run: .github/actions-scripts/prod-deploy.js

      - name: Mark the deployment as inactive if timed out
        uses: actions/github-script@2b34a689ec86a68d8ab9478298f91d5401337b7d
        if: ${{ steps.deploy.outcome == 'cancelled' }}
        env:
          DEPLOYMENT_ID: ${{ steps.deploy.outputs.deploymentId }}
          LOG_URL: ${{ steps.deploy.outputs.logUrl }}
        with:
          script: |
            const { DEPLOYMENT_ID, LOG_URL }  = process.env
            const { owner, repo } = context.repo

            if (!DEPLOYMENT_ID) {
              throw new Error('A deployment wasn't created before a timeout occurred!')
            }

            await github.repos.createDeploymentStatus({
              owner,
              repo,
              deployment_id: DEPLOYMENT_ID,
              state: 'error',
              description: 'The deployment step timed out. See workflow logs.',
              log_url: LOG_URL,
              // The 'ant-man' preview is required for `state` values of 'inactive', as well as
              // the use of the `log_url`, `environment_url`, and `auto_inactive` parameters.
              // The 'flash' preview is required for `state` values of 'in_progress' and 'queued'.
              mediaType: {
                previews: ['ant-man', 'flash'],
              },
            })
            console.log('‚è≤Ô∏è Deployment status: error - The deployment timed out...')

      - name: Purge Fastly edge cache
        env:
          FASTLY_TOKEN: ${{ secrets.FASTLY_TOKEN }}
          FASTLY_SERVICE_ID: ${{ secrets.FASTLY_SERVICE_ID }}
          FASTLY_SURROGATE_KEY: 'every-deployment'
        run: .github/actions-scripts/purge-fastly-edge-cache.js

      - name: Send Slack notification if workflow failed
        uses: someimportantcompany/github-actions-slack-message@f8d28715e7b8a4717047d23f48c39827cacad340
        if: ${{ failure() }}
        with:
          channel: ${{ secrets.DOCS_ALERTS_SLACK_CHANNEL_ID }}
          bot-token: ${{ secrets.SLACK_DOCS_BOT_TOKEN }}
          color: failure
          text: Production deployment failed at commit ${{ github.sha }}. See https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}
Encyclopedia Britannica
Search Britannica
Search Britannica...
Dictionary
Quizzes
Money
streaming
Introduction
Fast Facts
Related Content
More
More Articles On This Topic
Contributors
Article History
Home
Technology
The Web & Communication
streaming
data transmission
    
By The Editors of Encyclopaedia Britannica Article History
Related Topics: livestreaming data transmission
streaming, method of transmitting a media file in a continuous stream of data that can be processed by the receiving computer before the entire file has been completely sent. Streaming, which typically uses data compression, is especially effective for downloading large multimedia files from the Internet; it permits, for example, a video clip to begin playing on a user‚Äôs computer as soon as it begins to be downloaded from a website. Even with improved modems and connection speeds, downloading and playing large audio and video files without the use of streaming techniques still takes an inconveniently long time. To accept streaming data, the receiving computer needs to be running a player, a program that decompresses the incoming data and sends the resulting signals to the display and speakers. The audio and video files may be prerecorded, but streaming can also accommodate a live feed over the Internet. In the early 21st century, both personal computers and computer networks became fast enough to accommodate large streaming video files, and more than 70 percent of Internet traffic was streaming video, often on subscription services like Netflix and Amazon Prime.

The Editors of Encyclopaedia Britannica
This article was most recently revised and updated by Erik Gregersen.
fax
Introduction
Standard fax transmission
History of fax technology
Fast Facts
fax summary
Facts & Related Content
Media
Images
More
More Articles On This Topic
Contributors
Article History
Home
Technology
The Web & Communication
fax
communications
    
Alternate titles: facsimile, telefax
By David E. Borth Article History
Fax machines send and receive information using a telephone line.
fax
See all media
Related Topics: TelAutograph facsimile machine digital facsimile facsimile telegraph telephotography
Summary
Read a brief summary of this topic
fax, in full facsimile, also called telefax, in telecommunications, the transmission and reproduction of documents by wire or radio wave. Common fax machines are designed to scan printed textual and graphic material and then transmit the information through the telephone network to similar machines, where facsimiles are reproduced close to the form of the original documents. Fax machines, because of their low cost and their reliability, speed, and simplicity of operation, revolutionized business and personal correspondence. They virtually replaced telegraphic services, and they also present an alternative to government-run postal services and private couriers.

Standard fax transmission
Digital fax transmission and reception, using a scanner and printer connected by modem to the public switched telephone network.
Most office and home fax machines conform to the Group 3 standard, which was adopted in 1980 in order to ensure the compatibility of digital machines operating through public telephone systems worldwide. As a standard letter-size sheet is fed through a machine, it is scanned repeatedly across its width by a charge-coupled device (CCD), a solid-state scanner that has 1,728 photosensors in a single row. Each photosensor in turn generates a low or high variation in voltage, depending on whether the scanned spot is black or white. Since there normally are 4 scan lines per mm (100 scan lines per inch), the scanning of a single sheet can generate almost two million variations in voltage. The high/low variations are converted to a stream of binary digits, or bits, and the bit stream is subjected to a source encoder, which reduces or ‚Äúcompresses‚Äù the number of bits required to represent long runs of white or black spots. The encoded bit stream can then be modulated onto an analog carrier wave by a voice-band modem and transmitted through the telephone network. With source encoding, the number of bits required to represent a typewritten sheet can be reduced from two million to less than 400,000. As a result, at standard fax modem speeds (up to 56,000 bits per second, though usually less) a single page can be transmitted in as little as 15 seconds.

Communication between a transmitting and a receiving fax machine opens with the dialing of the telephone number of the receiving machine. This begins a process known as the ‚Äúhandshake,‚Äù in which the two machines exchange signals that establish compatible features such as modem speed, source code, and printing resolution. The page information is then transmitted, followed by a signal that indicates no more pages are to be sent. The called machine signals receipt of the message, and the calling machine signals to disconnect the line.

laser printer
laser printer
At the receiving machine, the signal is demodulated, decoded, and stored for timed release to the printer. In older fax machines the document was reproduced on special thermally sensitive paper, using a print head that had a row of fine wires corresponding to the photosensors in the scanning strip. In modern machines it is reproduced on plain paper by a xerographic process, in which a minutely focused beam of light from a semiconductor laser or a light-emitting diode, modulated by the incoming data stream, is swept across a rotating, electrostatically charged drum. The drum picks up toner powder in charged spots corresponding to black spots on the original document and transfers the toner to the paper.

Group 3 facsimile transmission can be conducted through all telecommunications media, whether they be copper wire, optical fibre, microwave radio, or cellular radio. In addition, personal computers (PCs) with the proper hardware and software can send files directly to fax machines without printing and scanning. Conversely, documents from a remote fax machine may be received by a computer for storage in its memory and eventual reproduction on a desktop printer. Internet fax servers have been developed that can send or receive facsimile documents and transmit them by e-mail between PCs.

History of fax technology
The concepts of facsimile transmission were developed in the 19th century using contemporary telegraph technology. Widespread employment of the method, however, did not take place until the 1980s, when inexpensive means of adapting digitized information to telephone circuits became common. The long and ultimately fruitful history of fax technology is traced in this section.

Get a Britannica Premium subscription and gain access to exclusive content.
Subscribe Now
Early telegraph facsimile
Facsimile transmission over wires traces its origins to Alexander Bain, a Scottish mechanic. In 1843, less than seven years after the invention of the telegraph by American Samuel F.B. Morse, Bain received a British patent for ‚Äúimprovements in producing and regulating electric currents and improvements in timepieces and in electric printing and signal telegraphs.‚Äù Bain‚Äôs fax transmitter was designed to scan a two-dimensional surface (Bain proposed metal type as the surface) by means of a stylus mounted on a pendulum. The invention was never demonstrated.

Frederick Bakewell, an English physicist, was the first to actually demonstrate facsimile transmission. The demonstration took place in London at the Great Exhibition of 1851. Bakewell‚Äôs system differed somewhat from Bain‚Äôs in that images were transmitted and received on cylinders‚Äîa method that was widely practiced through the 1960s. At the transmitter the image to be scanned was written with varnish or some other nonconducting material on tinfoil, wrapped around the transmitter cylinder, and then scanned by a conductive stylus that, like Bain‚Äôs stylus, was mounted to a pendulum. The cylinder rotated at a uniform rate by means of a clock mechanism. At the receiver a similar pendulum-driven stylus marked chemically treated paper with an electric current as the receiving cylinder rotated.

The first commercial facsimile system was introduced between Lyon and Paris, France, in 1863 by Giovanni Caselli, an Italian inventor. The first successful use of optical scanning and transmission of photographs was demonstrated by Arthur Korn of Germany in 1902. Korn‚Äôs transmitter employed a selenium photocell to sense an image wrapped on a transparent glass cylinder; at the receiver the transmitted image was recorded on photographic film. By 1906 Korn‚Äôs equipment was put into regular service for transmission of newspaper photographs between Munich and Berlin via telegraph circuits.

Analog telephone facsimile
The telephotography machine, an early analog fax machine introduced in 1924.
Further deployment of fax transmission had to await the development of improved long-distance telephone service. Between 1920 and 1923 the American Telephone & Telegraph Company (AT&T) worked on telephone facsimile technology, and in 1924 the telephotography machine was used to send pictures from political conventions in Cleveland, Ohio, and Chicago to New York City for publication in newspapers. The telephotography machine employed transparent cylindrical drums, which were driven by motors that were synchronized between transmitter and receiver. At the transmitter a positive transparent print was placed on the drum and was scanned by a vacuum-tube photoelectric cell. The output of the photocell modulated a 1,800-hertz carrier signal, which was subsequently sent over the telephone line. At the receiver an unexposed negative was progressively illuminated by a narrowly focused light beam, the intensity of which corresponded to the output of the photoelectric cell in the transmitter. The AT&T fax system was capable of transmitting a 12.7-by-17.8-cm (5-by-7-inch) photograph in seven minutes with a resolution of 4 lines per mm (100 lines per inch).

Further advancements in fax technology occurred during the 1930s and ‚Äô40s. In 1948 Western Union introduced its desk-fax service, which was based on a small office machine. Some 50,000 desk-fax units were built until the service was discontinued in the 1960s.

Over the years, different manufacturers adopted operability standards that allowed their machines to communicate with one another, but there was no worldwide standard that enabled American machines, for example, to connect to European fax machines. In 1974 the International Telegraph and Telephone Consultative Committee (CCITT) issued its first worldwide fax standard, known as Group 1 fax. Group 1 fax machines were capable of transmitting a one-page document in about six minutes with a resolution of 4 lines per mm using an analog signal format. This standard was followed in 1976 by a CCITT Group 2 fax standard, which permitted transmission of a one-page document in about three minutes using an improved modulation scheme.

Digital facsimile
The digital Group 3 fax machine, introduced in 1980.
Although the Group 2 fax machines proved to be successful in business applications where electronic transmission of documents containing nontextual information such as drawings, diagrams, and signatures was required, the slow transmission rate and the cost of the terminals ultimately limited the growth of fax services. In response, the CCITT developed standards for a new class of fax machine, now known as Group 3, which would use digital transmission of images through modems. With the encoding of a scanned image into binary digits, or bits, various image-compression methods (also known as source encoding or redundancy reduction) could be employed to reduce the number of bits required to represent the original image. By coupling a good source code with a high-speed modem, a Group 3 fax machine could reduce the time required to transmit a single page to less than one minute‚Äîa threefold improvement in transmission time over the older Group 2 fax machines. The Group 3 standard was adopted by the CCITT in 1980.

Originally, Group 3 fax was intended for transmission at data rates between 2,400 and 9,600 bits per second. With advances in voice-band modem technology, data transmission rates of 28,800 bits per second and above became common. Between 1981 and 1984 the CCITT sponsored the development of a high-speed fax service that was adopted as the Group 4 standard in 1984. Group 4 fax was intended to supplant Group 3 fax by permitting error-free transmission of documents over digital networks, such as the integrated services digital network (ISDN), at speeds up to 64,000 bits per second. At such rates, transmission time for a single page could be reduced to less than 10 seconds. Group 4 fax has been deployed in areas of the world where ISDN lines are readily available (e.g., Japan and France). However, since other areas (e.g., the United States) do not have many ISDN lines installed in the local telephone loop, Group 4 fax machines must also support Group 3 fax for transmission over analog lines.

David E. Borth
data transmission
Introduction
Fast Facts
Related Content
More
More Articles On This Topic
Contributors
Article History
Home
Technology
The Web & Communication
data transmission
computer science
    
By The Editors of Encyclopaedia Britannica Article History
Related Topics: fax video-on-demand streaming interrogation-reply principle teletext
data transmission, sending and receiving data via cables (e.g., telephone lines or fibre optics) or wireless systems.

Because ordinary telephone circuits pass signals that fall within the frequency range of voice communication (about 300‚Äì3,500 hertz), the high frequencies associated with data transmission suffer a loss of amplitude and transmission speed. Data signals must therefore be translated into a format compatible with the signals used in telephone lines. Digital computers use a modem to transform outgoing digital electronic data, and a similar system at the receiving end translates the incoming signal back to the original electronic data.

For data transmission over cable lines, which can transfer data at a much higher rate than that of ordinary telephone circuits, a cable modem is used that modulates and demodulates signals like a telephone modem but is a much more complex device. Once data have arrived at the modem in a home or business, they are often transmitted wirelessly from a router to other devices, such as personal computers or televisions.

Portable devices such as smartphones and tablet computers receive data wirelessly, either over the networks used for cellular phones or over short-range networks using Wi-Fi. See also broadband technology; cable modem; DSL; ISDN; fax; radio; teletype; T1; wireless communications.

The Editors of Encyclopaedia Britannica
This article was most recently revised and updated by Erik Gregersen.
